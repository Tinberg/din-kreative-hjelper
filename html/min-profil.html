<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Questrial&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/css/global.css" />
    <link rel="stylesheet" href="/css/min-profil.css" />

    <script src="/js/min-profil.js" defer></script>
  </head>
  <body>
    <header></header>
    <main>
      <section id="profile">
        <h1>Min Bruker</h1>
        <div class="profile-picture-container">
          <img
            class="profile-img"
            id="profile_picture"
            src=""
            alt="Profile picture"
          />
          <input
            class="di-none"
            type="file"
            id="profilePicture"
            accept="image/*"
          />
          <button id="uploadTrigger" class="upload-button">
            Bytt profilbilde
          </button>
        </div>
        <p>Brukernavn: <span id="username"></span></p>
        <p>Epost: <span id="email"></span></p>
        <p>Din posisjon: <span id="userLocation"></span></p>
        <!-- Embedded Map -->
        <iframe
          id="embeddedMap"
          class="custom-map"
          allowfullscreen=""
          aria-hidden="false"
          tabindex="0"
          src="https://www.google.com/maps/embed/v1/view?key=AIzaSyASJpumfzHiVTp3ATgQA7AXrS-E1-zdRzo&center=-34.397,150.644&zoom=8"
        >
        </iframe>
        <div>
          <label for="newLocation">Angi gateadresse, sted eller by:</label>
          <input type="text" id="newLocation" placeholder="Legg til posisjon" />
          <button id="updateLocationButton">Oppdater posisjon</button>
        </div>
        <p id="positionMessage" class="position-message"></p>
      </section>
      <section>
        <h2>Lag nytt innlegg</h2>
        <form id="postSubmissionForm">
          <label for="title">Title:</label>
          <input type="text" id="title" name="title" required /><br />

          <label for="description">Description:</label>
          <textarea id="description" name="description" required></textarea
          ><br />

          <label for="image">Image:</label>
          <input type="file" id="image" name="image" accept="image/*" /><br />
          <!-- Category Selection -->
          <div class="form-group">
            <label for="category">Hovedkategori:</label>
            <select id="category" name="category" required>
              <option value="">Velg en kategori...</option>
              <option value="Søm">Søm</option>
              <option value="Strikking">Strikking</option>
              <option value="Hekling">Hekling</option>
              <option value="Brodering">Brodering</option>
              <option value="Veving">Veving</option>
            </select>
          </div>

          <!-- Subcategory Selection (initially empty) -->
          <div class="form-group">
            <label for="subcategory">Underkategori:</label>
            <select id="subcategory" name="subcategory" required>
              <option value="">Velg en underkategori...</option>
              <!-- Options will be dynamically loaded based on the main category -->
            </select>
          </div>
          <button type="submit">Submit Post</button>
          <p id="createPostMessage"></p>
        </form>
      </section>
      <section>
        <h2>Mine innlegg</h2>
        <p id="myPosts"></p>
        <div id="userPostsContainer"></div>
      </section>
    </main>

    <footer></footer>
  </body>
</html>
